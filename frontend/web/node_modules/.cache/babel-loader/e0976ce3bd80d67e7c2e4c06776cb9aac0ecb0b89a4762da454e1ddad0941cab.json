{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_API_URL||'http://localhost:8000';function App(){const[messages,setMessages]=useState([]);const[inputText,setInputText]=useState('');const[isSpeaking,setIsSpeaking]=useState(false);const[isLoading,setIsLoading]=useState(false);const[sessionId]=useState(()=>{const stored=localStorage.getItem('bmo-session-id');if(stored)return stored;const newId=\"session-\".concat(Date.now());localStorage.setItem('bmo-session-id',newId);return newId;});const[userName,setUserName]=useState('');const[showNamePrompt,setShowNamePrompt]=useState(true);const[bmoMood,setBmoMood]=useState('happy');const[visibleMessages,setVisibleMessages]=useState(5);// Show last 5 messages\nconst inputRef=useRef(null);const messagesEndRef=useRef(null);useEffect(()=>{const savedName=localStorage.getItem('bmo-user-name');if(savedName){setUserName(savedName);setShowNamePrompt(false);const stored=localStorage.getItem('bmo-messages');if(stored)setMessages(JSON.parse(stored));}},[]);useEffect(()=>{if(messages.length>0){localStorage.setItem('bmo-messages',JSON.stringify(messages));}},[messages]);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);// Auto-focus input when not speaking\nuseEffect(()=>{if(!isSpeaking&&!isLoading&&inputRef.current){inputRef.current.focus();}},[isSpeaking,isLoading]);const getMoodFromBackend=async text=>{try{const res=await fetch(\"\".concat(API_BASE,\"/ai/emotion-analysis?text=\").concat(encodeURIComponent(text)));if(res.ok){const data=await res.json();return data.emotion||'happy';}}catch(err){console.warn('Could not get emotion from backend:',err);}return'happy';};const sendMessage=async text=>{if(!text.trim()||isLoading||isSpeaking)return;const userMsg={role:'user',content:text};setMessages(prev=>[...prev,userMsg]);setInputText('');setIsLoading(true);setBmoMood('thinking');try{const response=await fetch(\"\".concat(API_BASE,\"/ai/chat\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:text,session_id:sessionId,user_name:userName,language:'ar'})});if(!response.ok){throw new Error(\"API Error: \".concat(response.statusText));}const data=await response.json();const assistantMsg={role:'assistant',content:data.response,emotion:data.detected_emotion};setMessages(prev=>[...prev,assistantMsg]);// Set mood to talking\nsetBmoMood('talking');// Try to speak the response\nawait speakText(data.response);// Set mood based on AI's detected emotion\nconst detectedMood=data.detected_emotion||'happy';setBmoMood(detectedMood);}catch(err){console.error('Error sending message:',err);setBmoMood('nervous');const errorMsg={role:'assistant',content:'ŸÖÿπÿ∞ÿ±ÿ©ÿå ŸÑŸÖ ÿ£ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑÿ±ÿØ. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ¨ÿØÿØÿß.',emotion:'nervous'};setMessages(prev=>[...prev,errorMsg]);}finally{setIsLoading(false);}};const speakText=async text=>{try{setIsSpeaking(true);const res=await fetch(\"\".concat(API_BASE,\"/voice/text-to-speech\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text,language:'ar-TN'})});if(res.ok){const blob=await res.blob();const audioUrl=URL.createObjectURL(blob);const audio=new Audio(audioUrl);audio.onended=()=>{setIsSpeaking(false);URL.revokeObjectURL(audioUrl);};// Use playback promise handling\nconst playPromise=audio.play();if(playPromise!==undefined){playPromise.catch(err=>{console.error('Audio playback failed:',err);setIsSpeaking(false);});}}else{setIsSpeaking(false);}}catch(err){console.error('TTS Error:',err);setIsSpeaking(false);}};const handleNameSubmit=()=>{if(userName.trim()){localStorage.setItem('bmo-user-name',userName);setShowNamePrompt(false);}};if(showNamePrompt){return/*#__PURE__*/_jsx(\"div\",{className:\"name-prompt-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"name-prompt-container\",children:[/*#__PURE__*/_jsx(BMOFace,{mood:\"happy\",isSpeaking:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"name-prompt-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0645\\u0631\\u062D\\u0628\\u0627! \\uD83D\\uDC4B \\uD83C\\uDFAE\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0645\\u0627 \\u0647\\u0648 \\u0627\\u0633\\u0645\\u0643\\u061F\"}),/*#__PURE__*/_jsx(\"input\",{value:userName,onChange:e=>setUserName(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleNameSubmit(),placeholder:\"\\u0627\\u0643\\u062A\\u0628 \\u0627\\u0633\\u0645\\u0643...\",autoFocus:true,className:\"name-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNameSubmit,className:\"name-submit-btn\",children:\"\\u0627\\u0628\\u062F\\u0623 \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629\"})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"background-layer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bmo-section\",children:[/*#__PURE__*/_jsx(BMOFace,{mood:bmoMood,isSpeaking:isSpeaking}),isSpeaking&&/*#__PURE__*/_jsx(\"div\",{className:\"speaking-status\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u062F\\u062B...\"}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"speaking-status\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u0641\\u0643\\u064A\\u0631...\"})]}),!isSpeaking&&!isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-input-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,value:inputText,onChange:e=>setInputText(e.target.value),onKeyPress:e=>e.key==='Enter'&&sendMessage(inputText),placeholder:\"\\u0627\\u0643\\u062A\\u0628 \\u0631\\u0633\\u0627\\u0644\\u062A\\u0643...\",className:\"text-input\",disabled:isSpeaking||isLoading}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendMessage(inputText),disabled:isSpeaking||isLoading||!inputText.trim(),className:\"send-btn\",children:\"\\u0625\\u0631\\u0633\\u0627\\u0644\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"transcription-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"messages-list\",children:[messages.slice(-visibleMessages).map((msg,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble \".concat(msg.role),children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:msg.role==='user'?\"\".concat(userName||'ÿ£ŸÜÿ™',\":\"):'BMO:'}),/*#__PURE__*/_jsx(\"span\",{className:\"message-text\",children:msg.content})]},i)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})})]})]});}function BMOFace(_ref){let{mood='happy',isSpeaking=false}=_ref;const[displayMood,setDisplayMood]=useState(mood);const faceRef=useRef(null);useEffect(()=>{setDisplayMood(mood);},[mood]);// Map emotions to character images\nconst getMoodFaceImage=emotion=>{const faceMap={'happy':'Rosto-01.png','sad':'Rosto-15.png','surprised':'Rosto-13.png','angry':'Rosto-16.png','thinking':'Rosto-02.png','talking':'Rosto-03.png','confused':'Rosto-05.png','excited':'Rosto-27.png','loving':'Rosto-21.png','tired':'Rosto-25.png','proud':'Rosto-19.png','nervous':'Rosto-23.png','shocked':'Rosto-14.png','frustrated':'Rosto-17.png','laughing':'Rosto-22.png','interested':'Rosto-11.png'};const imageName=faceMap[emotion]||faceMap['happy'];return\"/assests/\".concat(imageName);};return/*#__PURE__*/_jsx(\"div\",{className:\"bmo-face-container\",ref:faceRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"character-face \".concat(displayMood,\" \").concat(isSpeaking?'speaking':''),children:[/*#__PURE__*/_jsx(\"img\",{src:getMoodFaceImage(displayMood),alt:\"BMO \".concat(displayMood),className:\"face-image\",onError:e=>{console.error('Image failed to load:',e.target.src);// Fallback to a simple emoji or placeholder\ne.target.style.display='none';}}),isSpeaking&&/*#__PURE__*/_jsxs(\"div\",{className:\"speaking-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"speak-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"speak-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"speak-dot\"})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","API_BASE","process","env","REACT_APP_API_URL","App","messages","setMessages","inputText","setInputText","isSpeaking","setIsSpeaking","isLoading","setIsLoading","sessionId","stored","localStorage","getItem","newId","concat","Date","now","setItem","userName","setUserName","showNamePrompt","setShowNamePrompt","bmoMood","setBmoMood","visibleMessages","setVisibleMessages","inputRef","messagesEndRef","savedName","JSON","parse","length","stringify","_messagesEndRef$curre","current","scrollIntoView","behavior","focus","getMoodFromBackend","text","res","fetch","encodeURIComponent","ok","data","json","emotion","err","console","warn","sendMessage","trim","userMsg","role","content","prev","response","method","headers","body","message","session_id","user_name","language","Error","statusText","assistantMsg","detected_emotion","speakText","detectedMood","error","errorMsg","blob","audioUrl","URL","createObjectURL","audio","Audio","onended","revokeObjectURL","playPromise","play","undefined","catch","handleNameSubmit","className","children","BMOFace","mood","value","onChange","e","target","onKeyPress","key","placeholder","autoFocus","onClick","ref","disabled","slice","map","msg","i","_ref","displayMood","setDisplayMood","faceRef","getMoodFaceImage","faceMap","imageName","src","alt","onError","style","display"],"sources":["/workspaces/BmoTn/frontend/web/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionId] = useState(() => {\n    const stored = localStorage.getItem('bmo-session-id');\n    if (stored) return stored;\n    const newId = `session-${Date.now()}`;\n    localStorage.setItem('bmo-session-id', newId);\n    return newId;\n  });\n  const [userName, setUserName] = useState('');\n  const [showNamePrompt, setShowNamePrompt] = useState(true);\n  const [bmoMood, setBmoMood] = useState('happy');\n  const [visibleMessages, setVisibleMessages] = useState(5); // Show last 5 messages\n  const inputRef = useRef(null);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    const savedName = localStorage.getItem('bmo-user-name');\n    if (savedName) {\n      setUserName(savedName);\n      setShowNamePrompt(false);\n      const stored = localStorage.getItem('bmo-messages');\n      if (stored) setMessages(JSON.parse(stored));\n    }\n  }, []);\n\n  useEffect(() => {\n    if (messages.length > 0) {\n      localStorage.setItem('bmo-messages', JSON.stringify(messages));\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Auto-focus input when not speaking\n  useEffect(() => {\n    if (!isSpeaking && !isLoading && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isSpeaking, isLoading]);\n\n  const getMoodFromBackend = async (text) => {\n    try {\n      const res = await fetch(`${API_BASE}/ai/emotion-analysis?text=${encodeURIComponent(text)}`);\n      if (res.ok) {\n        const data = await res.json();\n        return data.emotion || 'happy';\n      }\n    } catch (err) {\n      console.warn('Could not get emotion from backend:', err);\n    }\n    return 'happy';\n  };\n\n  const sendMessage = async (text) => {\n    if (!text.trim() || isLoading || isSpeaking) return;\n    \n    const userMsg = { role: 'user', content: text };\n    setMessages(prev => [...prev, userMsg]);\n    setInputText('');\n    setIsLoading(true);\n    setBmoMood('thinking');\n\n    try {\n      const response = await fetch(`${API_BASE}/ai/chat`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          message: text, \n          session_id: sessionId, \n          user_name: userName,\n          language: 'ar'\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`API Error: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      const assistantMsg = { \n        role: 'assistant', \n        content: data.response,\n        emotion: data.detected_emotion \n      };\n      setMessages(prev => [...prev, assistantMsg]);\n      \n      // Set mood to talking\n      setBmoMood('talking');\n      \n      // Try to speak the response\n      await speakText(data.response);\n      \n      // Set mood based on AI's detected emotion\n      const detectedMood = data.detected_emotion || 'happy';\n      setBmoMood(detectedMood);\n      \n    } catch (err) {\n      console.error('Error sending message:', err);\n      setBmoMood('nervous');\n      const errorMsg = { \n        role: 'assistant', \n        content: 'ŸÖÿπÿ∞ÿ±ÿ©ÿå ŸÑŸÖ ÿ£ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑÿ±ÿØ. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ¨ÿØÿØÿß.',\n        emotion: 'nervous'\n      };\n      setMessages(prev => [...prev, errorMsg]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const speakText = async (text) => {\n    try {\n      setIsSpeaking(true);\n      const res = await fetch(`${API_BASE}/voice/text-to-speech`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ text, language: 'ar-TN' })\n      });\n      \n      if (res.ok) {\n        const blob = await res.blob();\n        const audioUrl = URL.createObjectURL(blob);\n        const audio = new Audio(audioUrl);\n        audio.onended = () => {\n          setIsSpeaking(false);\n          URL.revokeObjectURL(audioUrl);\n        };\n        // Use playback promise handling\n        const playPromise = audio.play();\n        if (playPromise !== undefined) {\n          playPromise.catch(err => {\n            console.error('Audio playback failed:', err);\n            setIsSpeaking(false);\n          });\n        }\n      } else {\n        setIsSpeaking(false);\n      }\n    } catch (err) {\n      console.error('TTS Error:', err);\n      setIsSpeaking(false);\n    }\n  };\n\n  const handleNameSubmit = () => {\n    if (userName.trim()) {\n      localStorage.setItem('bmo-user-name', userName);\n      setShowNamePrompt(false);\n    }\n  };\n\n  if (showNamePrompt) {\n    return (\n      <div className=\"name-prompt-screen\">\n        <div className=\"name-prompt-container\">\n          <BMOFace mood=\"happy\" isSpeaking={false} />\n          <div className=\"name-prompt-content\">\n            <h1>ŸÖÿ±ÿ≠ÿ®ÿß! üëã üéÆ</h1>\n            <p>ŸÖÿß ŸáŸà ÿßÿ≥ŸÖŸÉÿü</p>\n            <input\n              value={userName}\n              onChange={(e) => setUserName(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleNameSubmit()}\n              placeholder=\"ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖŸÉ...\"\n              autoFocus\n              className=\"name-input\"\n            />\n            <button onClick={handleNameSubmit} className=\"name-submit-btn\">\n              ÿßÿ®ÿØÿ£ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app-container\">\n      {/* Background Blur Layer */}\n      <div className=\"background-layer\"></div>\n      \n      {/* Main Content */}\n      <div className=\"main-content\">\n        \n        {/* BMO Face - Takes up most of the screen */}\n        <div className=\"bmo-section\">\n          <BMOFace mood={bmoMood} isSpeaking={isSpeaking} />\n          {isSpeaking && <div className=\"speaking-status\">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØÿ´...</div>}\n          {isLoading && <div className=\"speaking-status\">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÅŸÉŸäÿ±...</div>}\n        </div>\n\n        {/* Text Input - Centered Below Face */}\n        {!isSpeaking && !isLoading && (\n          <div className=\"text-input-section\">\n            <div className=\"input-wrapper\">\n              <input\n                ref={inputRef}\n                value={inputText}\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && sendMessage(inputText)}\n                placeholder=\"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...\"\n                className=\"text-input\"\n                disabled={isSpeaking || isLoading}\n              />\n              <button \n                onClick={() => sendMessage(inputText)}\n                disabled={isSpeaking || isLoading || !inputText.trim()}\n                className=\"send-btn\"\n              >\n                ÿ•ÿ±ÿ≥ÿßŸÑ\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Dialog Transcriptions */}\n        <div className=\"transcription-section\">\n          <div className=\"messages-list\">\n            {messages.slice(-visibleMessages).map((msg, i) => (\n              <div key={i} className={`message-bubble ${msg.role}`}>\n                <span className=\"message-label\">\n                  {msg.role === 'user' ? `${userName || 'ÿ£ŸÜÿ™'}:` : 'BMO:'}\n                </span>\n                <span className=\"message-text\">{msg.content}</span>\n              </div>\n            ))}\n            <div ref={messagesEndRef} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction BMOFace({ mood = 'happy', isSpeaking = false }) {\n  const [displayMood, setDisplayMood] = useState(mood);\n  const faceRef = useRef(null);\n\n  useEffect(() => {\n    setDisplayMood(mood);\n  }, [mood]);\n\n  // Map emotions to character images\n  const getMoodFaceImage = (emotion) => {\n    const faceMap = {\n      'happy': 'Rosto-01.png',\n      'sad': 'Rosto-15.png',\n      'surprised': 'Rosto-13.png',\n      'angry': 'Rosto-16.png',\n      'thinking': 'Rosto-02.png',\n      'talking': 'Rosto-03.png',\n      'confused': 'Rosto-05.png',\n      'excited': 'Rosto-27.png',\n      'loving': 'Rosto-21.png',\n      'tired': 'Rosto-25.png',\n      'proud': 'Rosto-19.png',\n      'nervous': 'Rosto-23.png',\n      'shocked': 'Rosto-14.png',\n      'frustrated': 'Rosto-17.png',\n      'laughing': 'Rosto-22.png',\n      'interested': 'Rosto-11.png',\n    };\n    \n    const imageName = faceMap[emotion] || faceMap['happy'];\n    return `/assests/${imageName}`;\n  };\n\n  return (\n    <div className=\"bmo-face-container\" ref={faceRef}>\n      <div className={`character-face ${displayMood} ${isSpeaking ? 'speaking' : ''}`}>\n        <img \n          src={getMoodFaceImage(displayMood)} \n          alt={`BMO ${displayMood}`} \n          className=\"face-image\"\n          onError={(e) => {\n            console.error('Image failed to load:', e.target.src);\n            // Fallback to a simple emoji or placeholder\n            e.target.style.display = 'none';\n          }}\n        />\n        {isSpeaking && (\n          <div className=\"speaking-indicator\">\n            <div className=\"speak-dot\"></div>\n            <div className=\"speak-dot\"></div>\n            <div className=\"speak-dot\"></div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}